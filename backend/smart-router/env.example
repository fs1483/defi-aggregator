# DeFi聚合器智能路由服务环境配置示例
# 复制此文件为.env并根据实际环境配置
# 重要提示：关键配置项从全局配置文件(../../env.global)读取

# ========================================
# 服务配置（从全局配置读取）
# ========================================
# PORT - 从env.global的SMART_ROUTER_PORT读取
# APP_ENV - 从env.global读取
# LOG_LEVEL - 从env.global读取
# DEBUG - 从env.global读取

# ========================================
# Redis缓存配置（从全局配置读取）
# ========================================
# REDIS_HOST - 从env.global读取
# REDIS_PORT - 从env.global读取
# REDIS_PASSWORD - 从env.global读取
# REDIS_DB_SMART_ROUTER - 从env.global读取

# Redis连接池配置（可自定义）
REDIS_POOL_SIZE=10

# ========================================
# 第三方聚合器API配置（从全局配置读取）
# ========================================
# ONEINCH_API_URL - 从env.global读取
# ONEINCH_API_KEY - 从env.global读取
# PARASWAP_API_URL - 从env.global读取
# PARASWAP_API_KEY - 从env.global读取
# ZRX_API_URL - 从env.global读取
# ZRX_API_KEY - 从env.global读取
# COW_API_URL - 从env.global读取
# COW_API_KEY - 从env.global读取

# 聚合器超时配置（可自定义）
ONEINCH_TIMEOUT=3s
ONEINCH_RETRY_COUNT=2
ONEINCH_ENABLED=false   # 暂时禁用，等待API Key

PARASWAP_TIMEOUT=4s
PARASWAP_RETRY_COUNT=2
PARASWAP_ENABLED=false  # 暂时禁用，等待API Key

ZRX_TIMEOUT=5s
ZRX_RETRY_COUNT=2
ZRX_ENABLED=false       # 暂时禁用，等待API Key

COW_TIMEOUT=6s
COW_RETRY_COUNT=1
COW_ENABLED=true        # 立即可用，无需API Key

# ========================================
# 缓存配置
# ========================================
CACHE_DEFAULT_TTL=10s
CACHE_MAX_ENTRIES=10000
CACHE_CLEANUP_INTERVAL=5m
CACHE_PREFIX=smart_router:

# ========================================
# 智能路由策略配置
# ========================================
# 时间窗口配置
STRATEGY_MIN_WAIT=300ms
STRATEGY_MAX_WAIT=2s
STRATEGY_FAST_RESPONSE=500ms
STRATEGY_EMERGENCY_TIMEOUT=5s

# 质量控制配置
STRATEGY_MIN_CONFIDENCE=0.85
STRATEGY_MIN_PROVIDERS=1
STRATEGY_PREFERRED_PROVIDERS=2
STRATEGY_OPTIMAL_PROVIDERS=3

# 决策权重配置（必须总和为1.0）
STRATEGY_TIME_WEIGHT=0.3
STRATEGY_CONFIDENCE_WEIGHT=0.4
STRATEGY_PROVIDER_WEIGHT=0.2
STRATEGY_MARKET_WEIGHT=0.1

# 决策阈值
STRATEGY_COMPOSITE_THRESHOLD=0.8

# ========================================
# 监控配置
# ========================================
METRICS_ENABLED=true
METRICS_PATH=/metrics
HEALTH_CHECK_PATH=/health
STATS_INTERVAL=1m

# ========================================
# 配置说明
# ========================================
# 1. 本文件定义智能路由服务专用配置，全局配置从env.global读取
# 2. 必填配置项：PORT, APP_ENV, LOG_LEVEL, REDIS_*, 第三方API_URL
# 3. 聚合策略权重配置总和必须为1.0
# 4. 生产环境部署时，这些配置由Docker Compose从env.global自动加载
# 5. 如需自定义配置，可在此文件中覆盖全局配置
